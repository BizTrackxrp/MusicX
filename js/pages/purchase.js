/**
 * XRP Music - Purchase Page
 * Dedicated full-screen purchase flow
 * Clear Xaman instructions, can't accidentally close
 */

const PurchasePage = {
  release: null,
  track: null,
  isAlbum: false,
  
  async init() {
    // Get params from URL
    const params = new URLSearchParams(window.location.search);
    const releaseId = params.get('release');
    const trackId = params.get('track');
    this.isAlbum = params.get('album') === 'true';
    
    if (!releaseId) {
      this.showError('No release specified');
      return;
    }
    
    // Check if logged in
    if (!AppState.user?.address) {
      this.showLoginRequired();
      return;
    }
    
    // Fetch release data
    try {
      const data = await API.getRelease(releaseId);
      this.release = data?.release;
      
      if (!this.release) {
        this.showError('Release not found');
        return;
      }
      
      // If buying single track, find it
      if (trackId && !this.isAlbum) {
        this.track = this.release.tracks?.find(t => t.id == trackId);
        if (!this.track) {
          this.showError('Track not found');
          return;
        }
      }
      
      // Check availability BEFORE showing purchase UI
      const availabilityCheck = await this.checkAvailability();
      if (!availabilityCheck.available) {
        this.showSoldOut(availabilityCheck.reason);
        return;
      }
      
      this.render();
      
    } catch (error) {
      console.error('Failed to load release:', error);
      this.showError('Failed to load release data');
    }
  },
  
async checkAvailability() {
    try {
      const response = await fetch('/api/broker-sale', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          action: 'check',
          releaseId: this.release.id,
          trackId: this.track?.id,
        }),
      });
      
      const result = await response.json();
      
      if (!response.ok || !result.available) {
        return { 
          available: false, 
          reason: result.error || 'Not available' 
        };
      }
      
      return { available: true };
    } catch (error) {
      console.error('Availability check failed:', error);
      return { available: false, reason: 'Failed to check availability' };
    }
  },
  
  render() {
    const release = this.release;
    const track = this.track;
    const isAlbum = this.isAlbum;
    
    const trackPrice = parseFloat(release.songPrice) || 0;
    const trackCount = release.tracks?.length || 1;
    const totalPrice = isAlbum ? (trackPrice * trackCount) : trackPrice;
    const totalSignatures = isAlbum ? (1 + trackCount) : 2; // 1 payment + N accepts
    
    const itemTitle = isAlbum ? release.title : (track?.title || release.title);
    const itemType = isAlbum ? (release.type === 'album' ? 'Full Album' : 'Full EP') : 'Track';
    
    const available = release.totalEditions - release.soldEditions;
    
    const content = document.getElementById('page-content');
    content.innerHTML = `
      <div class="purchase-page">
        <div class="purchase-container">
          
          <!-- Header -->
          <div class="purchase-header">
            <button class="back-btn" onclick="history.back()">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
              </svg>
              Back
            </button>
            <h1>Complete Purchase</h1>
          </div>
          
          <!-- Main Content -->
          <div class="purchase-main">
            
            <!-- Left: Item Info -->
            <div class="purchase-item-section">
              <div class="purchase-cover">
                <img src="${release.coverUrl || '/placeholder.png'}" alt="${release.title}">
              </div>
              <div class="purchase-item-info">
                <span class="purchase-item-type">${itemType}</span>
                <h2 class="purchase-item-title">${itemTitle}</h2>
                <p class="purchase-item-artist">${release.artistName || 'Unknown Artist'}</p>
                ${isAlbum ? `<p class="purchase-item-tracks">${trackCount} tracks included</p>` : ''}
                <div class="purchase-availability">
                  <span class="availability-dot ${available <= 5 ? 'low' : ''}"></span>
                  <span>${available} of ${release.totalEditions} available</span>
                </div>
              </div>
            </div>
            
            <!-- Right: Purchase Flow -->
            <div class="purchase-flow-section">
              
              <!-- Price Summary -->
              <div class="purchase-summary-card">
                <h3>Order Summary</h3>
                <div class="summary-row">
                  <span>${isAlbum ? `${trackCount} NFTs Ã— ${trackPrice} XRP` : 'NFT Price'}</span>
                  <span>${totalPrice} XRP</span>
                </div>
                <div class="summary-row small">
                  <span>Network Fee</span>
                  <span>~0.00001 XRP</span>
                </div>
                <div class="summary-row total">
                  <span>Total</span>
                  <span>${totalPrice} XRP</span>
                </div>
              </div>
              
              <!-- Xaman Instructions -->
              <div class="xaman-instructions">
                <div class="xaman-header">
                    <img src="data:image/webp;base64,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" alt="Xaman" class="xaman-logo">
                  <div>
                    <h4>Xaman Wallet Required</h4>
                    <p>${totalSignatures} signatures needed</p>
                  </div>
                </div>
                
                <div class="signature-steps">
                  <div class="sig-step">
                    <div class="sig-num">1</div>
                    <div class="sig-info">
                      <strong>Payment</strong>
                      <span>Send ${totalPrice} XRP to platform</span>
                    </div>
                  </div>
                  ${isAlbum ? release.tracks.map((t, i) => `
                    <div class="sig-step">
                      <div class="sig-num">${i + 2}</div>
                      <div class="sig-info">
                        <strong>Accept NFT</strong>
                        <span>"${t.title}"</span>
                      </div>
                    </div>
                  `).join('') : `
                    <div class="sig-step">
                      <div class="sig-num">2</div>
                      <div class="sig-info">
                        <strong>Accept NFT</strong>
                        <span>Receive your NFT</span>
                      </div>
                    </div>
                  `}
                </div>
                
                <div class="xaman-tip">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                  </svg>
                  <div>
                    <strong>Important!</strong>
                    <p>Pull down on the <strong>Events</strong> tab in Xaman to refresh after each signature. New requests may not appear automatically.</p>
                  </div>
                </div>
              </div>
              
              <!-- Status Area (hidden initially) -->
              <div class="purchase-status" id="purchase-status" style="display: none;">
                <div class="status-icon">
                  <div class="spinner"></div>
                </div>
                <div class="status-text" id="status-text">Preparing...</div>
                <div class="status-sub" id="status-sub">Please wait</div>
              </div>
              
              <!-- Action Button -->
              <button class="purchase-btn" id="purchase-btn" onclick="PurchasePage.startPurchase()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                  <line x1="1" y1="10" x2="23" y2="10"></line>
                </svg>
                Pay ${totalPrice} XRP with Xaman
              </button>
              
              <p class="purchase-note">
                By purchasing, you agree to the terms of service. NFTs are non-refundable once transferred.
              </p>
              
            </div>
          </div>
        </div>
      </div>
      
      <style>
        .purchase-page {
          min-height: 100vh;
          background: var(--bg-primary);
          padding: 24px;
        }
        
        .purchase-container {
          max-width: 1000px;
          margin: 0 auto;
        }
        
        .purchase-header {
          display: flex;
          align-items: center;
          gap: 24px;
          margin-bottom: 32px;
        }
        
        .back-btn {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 10px 16px;
          background: var(--bg-secondary);
          border: 1px solid var(--border-color);
          border-radius: var(--radius-lg);
          color: var(--text-secondary);
          font-size: 14px;
          cursor: pointer;
          transition: all 150ms;
        }
        .back-btn:hover {
          background: var(--bg-hover);
          color: var(--text-primary);
        }
        
        .purchase-header h1 {
          font-size: 24px;
          font-weight: 700;
          color: var(--text-primary);
        }
        
        .purchase-main {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 48px;
        }
        
        @media (max-width: 768px) {
          .purchase-main {
            grid-template-columns: 1fr;
            gap: 32px;
          }
        }
        
        /* Left Section - Item Info */
        .purchase-item-section {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }
        
        .purchase-cover {
          width: 100%;
          max-width: 400px;
          aspect-ratio: 1;
          border-radius: var(--radius-xl);
          overflow: hidden;
          box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }
        .purchase-cover img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
        
        .purchase-item-info {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }
        
        .purchase-item-type {
          font-size: 12px;
          font-weight: 600;
          text-transform: uppercase;
          color: var(--accent);
          letter-spacing: 1px;
        }
        
        .purchase-item-title {
          font-size: 28px;
          font-weight: 700;
          color: var(--text-primary);
          line-height: 1.2;
        }
        
        .purchase-item-artist {
          font-size: 16px;
          color: var(--text-secondary);
        }
        
        .purchase-item-tracks {
          font-size: 14px;
          color: var(--text-muted);
        }
        
        .purchase-availability {
          display: flex;
          align-items: center;
          gap: 8px;
          margin-top: 8px;
          font-size: 14px;
          color: var(--text-secondary);
        }
        
        .availability-dot {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          background: var(--success);
        }
        .availability-dot.low {
          background: var(--warning);
        }
        
        /* Right Section - Purchase Flow */
        .purchase-flow-section {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }
        
        .purchase-summary-card {
          background: var(--bg-secondary);
          border: 1px solid var(--border-color);
          border-radius: var(--radius-xl);
          padding: 24px;
        }
        
        .purchase-summary-card h3 {
          font-size: 14px;
          font-weight: 600;
          color: var(--text-muted);
          text-transform: uppercase;
          letter-spacing: 0.5px;
          margin-bottom: 16px;
        }
        
        .summary-row {
          display: flex;
          justify-content: space-between;
          padding: 12px 0;
          font-size: 15px;
          color: var(--text-secondary);
          border-bottom: 1px solid var(--border-color);
        }
        .summary-row:last-child {
          border-bottom: none;
        }
        .summary-row.small {
          font-size: 13px;
          color: var(--text-muted);
          padding: 8px 0;
        }
        .summary-row.total {
          font-size: 20px;
          font-weight: 700;
          color: var(--text-primary);
          padding-top: 16px;
          margin-top: 8px;
          border-top: 2px solid var(--border-color);
          border-bottom: none;
        }
        
        /* Xaman Instructions */
        .xaman-instructions {
          background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(91, 33, 182, 0.1));
          border: 1px solid rgba(124, 58, 237, 0.3);
          border-radius: var(--radius-xl);
          padding: 24px;
        }
        
        .xaman-header {
          display: flex;
          align-items: center;
          gap: 16px;
          margin-bottom: 20px;
        }
        
        .xaman-logo {
          width: 48px;
          height: 48px;
          border-radius: 12px;
        }
        
        .xaman-header h4 {
          font-size: 16px;
          font-weight: 600;
          color: var(--text-primary);
          margin-bottom: 4px;
        }
        
        .xaman-header p {
          font-size: 14px;
          color: var(--accent);
          font-weight: 500;
        }
        
        .signature-steps {
          display: flex;
          flex-direction: column;
          gap: 12px;
          margin-bottom: 20px;
        }
        
        .sig-step {
          display: flex;
          align-items: center;
          gap: 16px;
          padding: 12px 16px;
          background: rgba(255,255,255,0.05);
          border-radius: var(--radius-lg);
        }
        
        .sig-num {
          width: 32px;
          height: 32px;
          border-radius: 50%;
          background: var(--accent);
          color: white;
          font-size: 14px;
          font-weight: 700;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }
        
        .sig-info {
          display: flex;
          flex-direction: column;
        }
        
        .sig-info strong {
          font-size: 14px;
          color: var(--text-primary);
        }
        
        .sig-info span {
          font-size: 13px;
          color: var(--text-muted);
        }
        
        .xaman-tip {
          display: flex;
          gap: 12px;
          padding: 16px;
          background: rgba(245, 158, 11, 0.1);
          border: 1px solid rgba(245, 158, 11, 0.3);
          border-radius: var(--radius-lg);
        }
        
        .xaman-tip svg {
          flex-shrink: 0;
          color: var(--warning);
        }
        
        .xaman-tip strong {
          display: block;
          font-size: 14px;
          color: var(--warning);
          margin-bottom: 4px;
        }
        
        .xaman-tip p {
          font-size: 13px;
          color: var(--text-secondary);
          line-height: 1.5;
        }
        
        /* Purchase Status */
        .purchase-status {
          text-align: center;
          padding: 32px;
          background: var(--bg-secondary);
          border-radius: var(--radius-xl);
        }
        
        .status-icon {
          margin-bottom: 16px;
        }
        
        .status-icon .spinner {
          width: 48px;
          height: 48px;
          margin: 0 auto;
        }
        
        .status-icon.success svg {
          color: var(--success);
        }
        
        .status-icon.error svg {
          color: var(--error);
        }
        
        .status-text {
          font-size: 18px;
          font-weight: 600;
          color: var(--text-primary);
          margin-bottom: 8px;
        }
        
        .status-sub {
          font-size: 14px;
          color: var(--text-muted);
        }
        
        /* Purchase Button */
        .purchase-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 12px;
          width: 100%;
          padding: 18px 32px;
          background: linear-gradient(135deg, #7c3aed, #5b21b6);
          border: none;
          border-radius: var(--radius-xl);
          color: white;
          font-size: 18px;
          font-weight: 600;
          cursor: pointer;
          transition: transform 150ms, box-shadow 150ms;
        }
        
        .purchase-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 12px 40px rgba(124, 58, 237, 0.4);
        }
        
        .purchase-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
          transform: none;
          box-shadow: none;
        }
        
        .purchase-note {
          font-size: 12px;
          color: var(--text-muted);
          text-align: center;
          line-height: 1.5;
        }
      </style>
    `;
  },
  
  async startPurchase() {
    const btn = document.getElementById('purchase-btn');
    const statusEl = document.getElementById('purchase-status');
    
    btn.disabled = true;
    btn.innerHTML = '<div class="spinner" style="width:20px;height:20px;border-width:2px;"></div> Processing...';
    statusEl.style.display = 'block';
    
    const updateStatus = (text, sub, type = 'loading') => {
      const iconEl = statusEl.querySelector('.status-icon');
      const textEl = document.getElementById('status-text');
      const subEl = document.getElementById('status-sub');
      
      if (type === 'loading') {
        iconEl.innerHTML = '<div class="spinner" style="width:48px;height:48px;"></div>';
        iconEl.className = 'status-icon';
      } else if (type === 'success') {
        iconEl.innerHTML = `<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>`;
        iconEl.className = 'status-icon success';
      } else if (type === 'error') {
        iconEl.innerHTML = `<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>`;
        iconEl.className = 'status-icon error';
      }
      
      textEl.textContent = text;
      subEl.textContent = sub;
    };
    
    try {
      // Get platform address
      const configResponse = await fetch('/api/batch-mint', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ action: 'getConfig' }),
      });
      const configData = await configResponse.json();
      const platformAddress = configData.platformAddress;
      
      if (!platformAddress) throw new Error('Platform not configured');
      
      const trackPrice = parseFloat(this.release.songPrice) || 0;
      const trackCount = this.release.tracks?.length || 1;
      const totalPrice = this.isAlbum ? (trackPrice * trackCount) : trackPrice;
      
      // Step 1: Payment
      updateStatus('Sign Payment', `Send ${totalPrice} XRP in Xaman`);
      
      const paymentResult = await XamanWallet.sendPayment(
        platformAddress,
        totalPrice,
        `XRP Music: ${this.release.title}`
      );
      
      if (!paymentResult.success) {
        throw new Error(paymentResult.error || 'Payment cancelled');
      }
      
      // Step 2: Call appropriate API
      if (this.isAlbum) {
        await this.processAlbumPurchase(paymentResult.txHash, updateStatus);
      } else {
        await this.processSinglePurchase(paymentResult.txHash, updateStatus);
      }
      
    } catch (error) {
      console.error('Purchase failed:', error);
      updateStatus('Purchase Failed', error.message, 'error');
      
      btn.disabled = false;
      btn.innerHTML = `
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
        </svg>
        Try Again
      `;
    }
  },
  
  async processSinglePurchase(paymentTxHash, updateStatus) {
    // Call broker-sale API
    updateStatus('Preparing NFT', 'Platform is creating transfer offer...');
    
    const purchaseResponse = await fetch('/api/broker-sale', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        releaseId: this.release.id,
        trackId: this.track?.id,
        buyerAddress: AppState.user.address,
        paymentTxHash: paymentTxHash,
      }),
    });
    
    const purchaseResult = await purchaseResponse.json();
    
    if (!purchaseResult.success) {
      if (purchaseResult.refunded) {
        throw new Error('Sold out - payment refunded');
      }
      throw new Error(purchaseResult.error || 'Purchase failed');
    }
    
    // Accept NFT offer
    updateStatus('Accept NFT', 'Sign in Xaman to receive your NFT - Pull down Events to refresh!');
    
    const acceptResult = await XamanWallet.acceptSellOffer(purchaseResult.sellOfferIndex);
    
    if (!acceptResult.success) {
      throw new Error('Failed to accept NFT - check Xaman Requests');
    }
    
    // Confirm sale
    try {
      await fetch('/api/broker-sale', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          action: 'confirm',
          pendingSale: purchaseResult.pendingSale,
          acceptTxHash: acceptResult.txHash,
        }),
      });
    } catch (e) {
      console.error('Failed to confirm:', e);
    }
    
    // Success!
    updateStatus('Purchase Complete! ðŸŽ‰', 'NFT is now in your wallet', 'success');
    
    setTimeout(() => {
      Router.navigate('profile');
    }, 2000);
  },
  
  async processAlbumPurchase(paymentTxHash, updateStatus) {
    const trackCount = this.release.tracks?.length || 1;
    
    // Call broker-album-sale API
    updateStatus('Preparing NFTs', `Creating ${trackCount} transfer offers...`);
    
    const purchaseResponse = await fetch('/api/broker-album-sale', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        releaseId: this.release.id,
        buyerAddress: AppState.user.address,
        paymentTxHash: paymentTxHash,
      }),
    });
    
    const purchaseResult = await purchaseResponse.json();
    
    if (!purchaseResult.success) {
      if (purchaseResult.refunded) {
        throw new Error('NFT unavailable - payment refunded');
      }
      throw new Error(purchaseResult.error || 'Purchase failed');
    }
    
    // Accept each NFT offer
    const acceptTxHashes = [];
    for (let i = 0; i < purchaseResult.offerIndexes.length; i++) {
      const trackTitle = this.release.tracks[i]?.title || `Track ${i + 1}`;
      updateStatus(
        `Accept NFT ${i + 1}/${purchaseResult.offerIndexes.length}`,
        `"${trackTitle}" - Pull down Events in Xaman to refresh!`
      );
      
      const acceptResult = await XamanWallet.acceptSellOffer(purchaseResult.offerIndexes[i]);
      
      if (!acceptResult.success) {
        throw new Error(`Failed to accept "${trackTitle}" - check Xaman Requests`);
      }
      acceptTxHashes.push(acceptResult.txHash);
    }
    
    // Confirm sales
    updateStatus('Finalizing', 'Recording purchase...');
    
    try {
      await fetch('/api/broker-album-sale', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          action: 'confirm',
          pendingSales: purchaseResult.pendingSales,
          acceptTxHashes: acceptTxHashes,
        }),
      });
    } catch (e) {
      console.error('Failed to confirm:', e);
    }
    
    // Success!
    updateStatus('Album Purchased! ðŸŽ‰', `${trackCount} NFTs are now in your wallet`, 'success');
    
    setTimeout(() => {
      Router.navigate('profile');
    }, 2000);
  },
  
  showError(message) {
    const content = document.getElementById('page-content');
    content.innerHTML = `
      <div class="purchase-page">
        <div class="purchase-container">
          <div class="purchase-error">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--error)" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="15" y1="9" x2="9" y2="15"></line>
              <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
            <h2>Error</h2>
            <p>${message}</p>
            <button class="btn btn-primary" onclick="history.back()">Go Back</button>
          </div>
        </div>
      </div>
      <style>
        .purchase-error {
          text-align: center;
          padding: 64px;
        }
        .purchase-error h2 {
          font-size: 24px;
          margin: 24px 0 12px;
          color: var(--text-primary);
        }
        .purchase-error p {
          color: var(--text-muted);
          margin-bottom: 24px;
        }
      </style>
    `;
  },
  
  showSoldOut(reason) {
    const content = document.getElementById('page-content');
    content.innerHTML = `
      <div class="purchase-page">
        <div class="purchase-container">
          <div class="purchase-error">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--warning)" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <h2>Sold Out</h2>
            <p>${reason}</p>
            <p style="font-size: 14px; margin-top: 12px;">Check the <a href="#marketplace" style="color: var(--accent);">Resale Market</a> for available copies.</p>
            <button class="btn btn-primary" onclick="history.back()" style="margin-top: 24px;">Go Back</button>
          </div>
        </div>
      </div>
      <style>
        .purchase-error {
          text-align: center;
          padding: 64px;
        }
        .purchase-error h2 {
          font-size: 24px;
          margin: 24px 0 12px;
          color: var(--text-primary);
        }
        .purchase-error p {
          color: var(--text-muted);
        }
      </style>
    `;
  },
  
  showLoginRequired() {
    const content = document.getElementById('page-content');
    content.innerHTML = `
      <div class="purchase-page">
        <div class="purchase-container">
          <div class="purchase-error">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
              <line x1="1" y1="10" x2="23" y2="10"></line>
            </svg>
            <h2>Connect Wallet</h2>
            <p>You need to connect your Xaman wallet to make purchases.</p>
            <button class="btn btn-primary" onclick="Modals.showAuth()" style="margin-top: 24px;">Connect Wallet</button>
          </div>
        </div>
      </div>
      <style>
        .purchase-error {
          text-align: center;
          padding: 64px;
        }
        .purchase-error h2 {
          font-size: 24px;
          margin: 24px 0 12px;
          color: var(--text-primary);
        }
        .purchase-error p {
          color: var(--text-muted);
        }
      </style>
    `;
  },
};
